private JButton exportPurchaseHistoryButton;

exportPurchaseHistoryButton = new JButton("Export Purchase History");

add(exportPurchaseHistoryButton);


exportPurchaseHistoryButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        Methods methods = new Methods();
        ArrayList<SoldProduct> history = methods.makeCustomerHistory(userAccount);

        if (history.isEmpty()) {
            JOptionPane.showMessageDialog(null, "No History!", "Customer History", JOptionPane.INFORMATION_MESSAGE);
            System.out.println("empty history print null");
        } else {
            String[] historyString = new String[history.size()];
            for (int i = 0; i < history.size(); i++) {
                historyString[i] = history.get(i).customerRecieptStatistics();
            }

            try (PrintWriter writer = new PrintWriter(new FileWriter("purchase_history.txt"))) {
                for (String entry : historyString) {
                    writer.println(entry);
                }
                System.out.println("Purchase history saved to file: purchase_history.txt");
            } catch (IOException ex) {
                ex.printStackTrace();
                JOptionPane.showMessageDialog(null, "Error saving purchase history to file!", "Error",
                        JOptionPane.ERROR_MESSAGE);
            }

            JOptionPane.showInputDialog(null, "Purchase History", "Customer History",
                    JOptionPane.QUESTION_MESSAGE, null, historyString, historyString[0]);
            System.out.println("customer background shown");
        }
    }
});
